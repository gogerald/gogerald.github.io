<!DOCTYPE html>

<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <body>
    <center>
      <header>
        <h1> Bobpay web app pay page </h1>
      </header>

      <button id="pay" type="button">Pay</button>
      <button id="cancel" type="button">Cancel</button>
    </center>

    <script>
      window.addEventListener("message", function(e)) {
        var payButton = document.getElementById("pay");
        var cancelButton = document.getElementById("cancel");

        payButton.onclick = function() {
          var details = {
            id:"458789544454455114"
          }
          var paymentAppResponse = {
            methodName: "https://emerald-eon.appspot.com/bobpay",
            details: details
          };

          e.ports[0].postMessage(paymentAppResponse);
          window.close();
        }

        cancelButton.onclick = function() {
          var rejectReason = {
            reason: "user cancel"
          }
          e.ports[0].postMessage(rejectReason);
          window.close();
        }
      }
    </script>
  </body>
</html>
