<!DOCTYPE html>

<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>  
  
  <body>

    <form id="form">
    <table>
      <tr><th>Cardholder Name:</th><td><input name="cardholderName"></td></tr>
      <tr><th>Card Number:</th><td><input name="cardNumber"></td></tr>
      <tr><th>Expiration Month:</th><td><input name="expiryMonth"></td></tr>
      <tr><th>Expiration Year:</th><td><input name="expiryYear"></td></tr>
      <tr><th>Security Code:</th><td><input name="cardSecurityCode"></td></tr>
      <tr><th></th><td><input type="submit" value="Pay"></td></tr>
    </table>
    </form>

    <center>
      <header>
        <h1> Bobpay page </h1>
      </header>      
    </center>
    
    <script>
    window.addEventListener("message", function(e) {
      var form = document.getElementById("form");
      /* Note: message sent from payment app is available in e.data */
      form.onsubmit = function() {
        /* See https://w3c.github.io/webpayments-methods-card/#basiccardresponse */
        var basicCardResponse = {};
        [ "cardholderName", "cardNumber","expiryMonth","expiryYear","cardSecurityCode"]
        .forEach(function(field) {
          basicCardResponse[field] = form.elements[field].value;
        });

        /* See https://w3c.github.io/webpayments-payment-apps-api/#sec-app-response */
        var paymentAppResponse = {
          methodName: "basic-card",
          details: details
        };

        e.source.postMessage(paymentAppResponse);
        window.close();
      }
    });
    </script>
  </body>
</html>